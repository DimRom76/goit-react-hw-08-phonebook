(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[4],{117:function(t,e,n){},12:function(t,e,n){"use strict";n.d(e,"a",(function(){return h})),n.d(e,"c",(function(){return p})),n.d(e,"b",(function(){return q}));var r=n(27),c=n.n(r),o=n(37),a=n(17),s=n.n(a),u=n(4),i={loginUserRequest:Object(u.b)("auth/loginUserRequest"),loginUserSuccess:Object(u.b)("auth/loginUserSuccess"),loginUserError:Object(u.b)("auth/loginUserError"),logoutUserRequest:Object(u.b)("auth/logoutUserRequest"),logoutUserSuccess:Object(u.b)("auth/logoutUserSuccess"),logoutUserError:Object(u.b)("auth/logoutUserError"),registrationUserRequest:Object(u.b)("auth/registrationUserRequest"),registrationUserSuccess:Object(u.b)("auth/registrationUserSuccess"),registrationUserError:Object(u.b)("auth/registrationUserError"),getCurrentUserRequest:Object(u.b)("auth/getCurrentUserRequest"),getCurrentUserSuccess:Object(u.b)("auth/getCurrentUserSuccess"),getCurrentUserError:Object(u.b)("auth/getCurrentUserError")};s.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var b,l,j,d,O,f=function(t){s.a.defaults.headers.common.Authorization="Bearer ".concat(t)},g=function(){s.a.defaults.headers.common.Authorization=""},h={loginUser:function(t){return function(){var e=Object(o.a)(c.a.mark((function e(n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(i.loginUserRequest()),e.prev=1,e.next=4,s.a.post("/users/login",t);case 4:r=e.sent,f(r.data.token),n(i.loginUserSuccess(r.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n(i.loginUserError(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},registrationUser:function(t){return function(){var e=Object(o.a)(c.a.mark((function e(n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(i.registrationUserRequest()),e.prev=1,e.next=4,s.a.post("/users/signup",t);case 4:r=e.sent,f(r.data.token),n(i.registrationUserSuccess(r.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n(i.registrationUserError(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},logoutUser:function(){return function(){var t=Object(o.a)(c.a.mark((function t(e){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(i.logoutUserRequest()),t.prev=1,t.next=4,s.a.post("/users/logout");case 4:n=t.sent,g(),e(i.logoutUserSuccess(n.data)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),e(i.logoutUserError(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},getCurrentUser:function(){return function(){var t=Object(o.a)(c.a.mark((function t(e,n){var r,o,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n(),o=r.auth.token){t.next=3;break}return t.abrupt("return");case 3:return f(o),e(i.getCurrentUserRequest()),t.prev=5,t.next=8,s.a.get("/users/current");case 8:a=t.sent,e(i.getCurrentUserSuccess(a.data)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(5),e(i.getCurrentUserError(t.t0.message));case 15:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e,n){return t.apply(this,arguments)}}()}},p={getIsAuthenticated:function(t){return t.auth.isAuthenticated},getUsername:function(t){return t.auth.user.name},getError:function(t){return t.auth.error},getLoading:function(t){return t.auth.loading}},U=n(2),m=n(9),v={name:null,email:null},x=function(t,e){return e.payload.user},C=Object(u.c)(v,(b={},Object(U.a)(b,i.registrationUserSuccess,x),Object(U.a)(b,i.loginUserSuccess,x),Object(U.a)(b,i.logoutUserSuccess,(function(){return v})),Object(U.a)(b,i.getCurrentUserSuccess,(function(t,e){return e.payload})),b)),k=function(t,e){return e.payload.token},S=Object(u.c)(null,(l={},Object(U.a)(l,i.registrationUserSuccess,k),Object(U.a)(l,i.loginUserSuccess,k),Object(U.a)(l,i.logoutUserSuccess,(function(){return null})),l)),y=function(){return!0},E=function(){return!1},L=Object(u.c)(!1,(j={},Object(U.a)(j,i.registrationUserRequest,y),Object(U.a)(j,i.registrationUserSuccess,E),Object(U.a)(j,i.registrationUserError,E),Object(U.a)(j,i.loginUserRequest,y),Object(U.a)(j,i.loginUserSuccess,E),Object(U.a)(j,i.loginUserError,E),Object(U.a)(j,i.logoutUserRequest,y),Object(U.a)(j,i.logoutUserSuccess,E),Object(U.a)(j,i.logoutUserError,E),Object(U.a)(j,i.getCurrentUserRequest,y),Object(U.a)(j,i.getCurrentUserSuccess,E),Object(U.a)(j,i.getCurrentUserError,E),j)),w=function(t,e){return e.payload},A=Object(u.c)(null,(d={},Object(U.a)(d,i.registrationUserRequest,(function(){return""})),Object(U.a)(d,i.registrationUserSuccess,(function(){return""})),Object(U.a)(d,i.registrationUserError,w),Object(U.a)(d,i.loginUserRequest,(function(){return""})),Object(U.a)(d,i.loginUserSuccess,(function(){return""})),Object(U.a)(d,i.loginUserError,w),Object(U.a)(d,i.logoutUserRequest,(function(){return""})),Object(U.a)(d,i.logoutUserSuccess,(function(){return""})),Object(U.a)(d,i.logoutUserError,w),Object(U.a)(d,i.getCurrentUserRequest,(function(){return""})),Object(U.a)(d,i.getCurrentUserSuccess,(function(){return""})),Object(U.a)(d,i.getCurrentUserError,w),d)),_=Object(u.c)(!1,(O={},Object(U.a)(O,i.registrationUserSuccess,y),Object(U.a)(O,i.loginUserSuccess,y),Object(U.a)(O,i.logoutUserSuccess,E),Object(U.a)(O,i.getCurrentUserSuccess,y),Object(U.a)(O,i.registrationUserError,E),Object(U.a)(O,i.loginUserError,E),Object(U.a)(O,i.getCurrentUserError,E),O)),q=Object(m.c)({user:C,isAuthenticated:_,token:S,loading:L,error:A})},120:function(t,e,n){"use strict";n.r(e);var r=n(3),c=n(0),o=n.n(c),a=n(19),s=n.n(a),u=n(24),i=n(20),b=n(79),l=(n(96),n(38)),j=n(39),d=n(40),O=n(41),f=n(7),g=n(140),h=n(46),p=(n(86),n(12)),U=n(29),m=n(49),v=Object(i.b)((function(t){return{isAuthenticated:p.c.getIsAuthenticated(t)}}))((function(t){var e=t.component,n=t.isAuthenticated,c=t.redirectTo,o=Object(m.a)(t,["component","isAuthenticated","redirectTo"]);return Object(r.jsx)(f.b,Object(U.a)(Object(U.a)({},o),{},{render:function(t){return n?Object(r.jsx)(e,Object(U.a)({},t)):Object(r.jsx)(f.a,{to:c})}}))})),x=Object(i.b)((function(t){return{isAuthenticated:p.c.getIsAuthenticated(t)}}))((function(t){var e=t.component,n=t.isAuthenticated,c=t.redirectTo,o=Object(m.a)(t,["component","isAuthenticated","redirectTo"]);return Object(r.jsx)(f.b,Object(U.a)(Object(U.a)({},o),{},{render:function(t){return n&&o.restricted?Object(r.jsx)(f.a,{to:c}):Object(r.jsx)(e,Object(U.a)({},t))}}))})),C=n(138),k=n(139),S={home:"/",register:"/register",login:"/login",contacts:"/contacts"},y=n(25),E=n.n(y);function L(){return Object(r.jsxs)("div",{children:[Object(r.jsx)(u.b,{to:S.login,className:E.a.mainLink,activeClassName:E.a.mainLinkActive,children:"Login"}),Object(r.jsx)(u.b,{to:S.register,className:E.a.mainLink,activeClassName:E.a.mainLinkActive,children:"Registration"})]})}var w=n(141);var A={logoutUser:p.a.logoutUser},_=Object(i.b)((function(t){return{name:p.c.getUsername(t)}}),A)((function(t){var e=t.name,n=t.logoutUser;return Object(r.jsxs)("div",{children:[Object(r.jsxs)("span",{children:["Welcome, ",e]}),Object(r.jsx)(w.a,{variant:"contained",color:"primary",style:{marginLeft:10},onClick:n,children:"Logout"})]})}));var q=Object(i.b)((function(t){return{isAuthenticated:p.c.getIsAuthenticated(t)}}))((function(t){var e=t.isAuthenticated;return Object(r.jsx)(C.a,{position:"sticky",children:Object(r.jsxs)(k.a,{className:E.a.mainNav,children:[Object(r.jsxs)("div",{children:[Object(r.jsx)(u.b,{to:S.home,exact:!0,className:E.a.mainLink,activeClassName:E.a.mainLinkActive,children:"Home"}),e&&Object(r.jsx)(u.b,{to:S.contacts,className:E.a.mainLink,activeClassName:E.a.mainLinkActive,children:"Contacts"})]}),e?Object(r.jsx)(_,{}):Object(r.jsx)(L,{})]})})})),R=n(77),N=(n(117),Object(c.lazy)((function(){return n.e(2).then(n.bind(null,349))}))),M=Object(c.lazy)((function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,353))})),T=Object(c.lazy)((function(){return Promise.all([n.e(0),n.e(3)]).then(n.bind(null,350))})),z=Object(c.lazy)((function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,351))})),D=function(t){Object(d.a)(n,t);var e=Object(O.a)(n);function n(){return Object(l.a)(this,n),e.apply(this,arguments)}return Object(j.a)(n,[{key:"componentDidMount",value:function(){this.props.onGetCurretnUser()}},{key:"componentDidUpdate",value:function(t){var e=this.props.errorLogin;e!==t.errorLogin&&e&&h.b.warn("\u041e\u0448\u0438\u0431\u043a\u0430! ".concat(e))}},{key:"render",value:function(){return Object(r.jsxs)(g.a,{maxWidth:"md",children:[Object(r.jsx)(q,{}),Object(r.jsx)(c.Suspense,{fallback:Object(r.jsx)("p",{children:"Loading..."}),children:Object(r.jsxs)(f.d,{children:[Object(r.jsx)(f.b,{path:S.home,component:N,exact:!0}),Object(r.jsx)(x,{path:S.register,restricted:!0,component:z,redirectTo:S.contacts}),Object(r.jsx)(x,{path:S.login,restricted:!0,component:T,redirectTo:S.contacts}),Object(r.jsx)(v,{path:S.contacts,component:M,redirectTo:S.login}),Object(r.jsx)(f.b,{render:function(){return Object(r.jsx)("h1",{children:"Page not found"})}})]})}),Object(r.jsx)(h.a,{}),this.props.isAuthLoading&&Object(r.jsx)(R.a,{children:Object(r.jsx)("h1",{children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f..."})})]})}}]),n}(c.Component),I={onGetCurretnUser:p.a.getCurrentUser},P=Object(i.b)((function(t){return{errorLogin:p.c.getError(t),isAuthLoading:p.c.getLoading(t)}}),I)(D),B=n(44),J=n(4),K=n(28),W=n(83),F=n.n(W),G=n(59),H=Object(B.a)(Object(J.d)({serializableCheck:{ignoredActions:[K.a,K.f,K.b,K.c,K.d,K.e]}})),Q={key:"auth",storage:F.a,whitelist:["token"]},V=Object(J.a)({reducer:{contacts:G.c,auth:Object(K.g)(Q,p.b)},middleware:H,devTools:!1}),Z={store:V,persistor:Object(K.h)(V)};s.a.render(Object(r.jsx)(o.a.StrictMode,{children:Object(r.jsx)(i.a,{store:Z.store,children:Object(r.jsx)(b.a,{loading:null,persistor:Z.persistor,children:Object(r.jsx)(u.a,{children:Object(r.jsx)(P,{})})})})}),document.getElementById("root"))},25:function(t,e,n){t.exports={mainLink:"Navigation_mainLink__1Q72q",mainLinkActive:"Navigation_mainLinkActive__1PetH",mainNav:"Navigation_mainNav__2fTJc"}},57:function(t,e,n){t.exports={Modal__backdrop:"Modal_Modal__backdrop__2coS4",Modal__content:"Modal_Modal__content__19IZD"}},59:function(t,e,n){"use strict";n.d(e,"b",(function(){return v})),n.d(e,"d",(function(){return S})),n.d(e,"c",(function(){return R})),n.d(e,"a",(function(){return m}));var r,c,o=n(17),a=n.n(o),s=n(4),u=Object(s.b)("contacts/fetchContactsRequest"),i=Object(s.b)("contacts/fetchContactsSuccess"),b=Object(s.b)("contacts/fetchContactsError"),l=Object(s.b)("contacts/addContactRequest"),j=Object(s.b)("contacts/addContactSuccess"),d=Object(s.b)("contacts/addContactError"),O=Object(s.b)("contacts/editContactRequest"),f=Object(s.b)("contacts/editContactSuccess"),g=Object(s.b)("contacts/editContactError"),h=Object(s.b)("contacts/deleteContactRequest"),p=Object(s.b)("contacts/deleteContactSuccess"),U=Object(s.b)("contacts/deleteContactError"),m=Object(s.b)("contacts/changeFilter"),v={fetchContacts:function(){return function(t){t(u()),a.a.get("/contacts").then((function(e){var n=e.data;return t(i(n))})).catch((function(e){return t(b(e))}))}},addContact:function(t){return function(e){e(l()),a.a.post("/contacts",t).then((function(t){var n=t.data;return e(j(n))})).catch((function(t){return e(d(t))}))}},deleteContact:function(t){return function(e){e(h()),a.a.delete("/contacts/".concat(t)).then((function(){return e(p(t))})).catch((function(t){return e(U(t))}))}},editContact:function(t){return function(e){e(O());var n=t.id;delete t.id,a.a.patch("/contacts/".concat(n),t).then((function(t){var n=t.data;return e(f(n))})).catch((function(t){return e(g(t))}))}}},x=n(45),C=function(t){return t.contacts.items},k=function(t){return t.contacts.filter},S={getAllContacts:C,getFilter:k,getLoading:function(t){return t.contacts.loading},getVisibleContacts:Object(x.a)([C,k],(function(t,e){var n=e.toLowerCase();return t.filter((function(t){return-1!==t.name.toLowerCase().indexOf(n)}))}))},y=n(2),E=n(44),L=n(9),w=Object(s.c)([],(r={},Object(y.a)(r,i,(function(t,e){return e.payload})),Object(y.a)(r,j,(function(t,e){var n=e.payload;return[].concat(Object(E.a)(t),[n])})),Object(y.a)(r,p,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),Object(y.a)(r,f,(function(t,e){var n=e.payload;return t.map((function(t){return t.id===n.id?n:t}))})),r)),A=Object(s.c)("",Object(y.a)({},m,(function(t,e){return e.payload}))),_=Object(s.c)(!1,(c={},Object(y.a)(c,u,(function(){return!0})),Object(y.a)(c,i,(function(){return!1})),Object(y.a)(c,b,(function(){return!1})),Object(y.a)(c,l,(function(){return!0})),Object(y.a)(c,j,(function(){return!1})),Object(y.a)(c,d,(function(){return!1})),Object(y.a)(c,O,(function(){return!0})),Object(y.a)(c,f,(function(){return!1})),Object(y.a)(c,g,(function(){return!1})),Object(y.a)(c,h,(function(){return!0})),Object(y.a)(c,p,(function(){return!1})),Object(y.a)(c,U,(function(){return!1})),c)),q=Object(s.c)(null,{}),R=Object(L.c)({items:w,filter:A,loading:_,error:q})},77:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n(3),c=n(38),o=n(39),a=n(40),s=n(41),u=n(0),i=n(19),b=n(57),l=n.n(b),j=document.querySelector("#modal-root"),d=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(){var t;Object(c.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))).handleKeyDown=function(e){var n;"Escape"===e.code&&((null===(n=t.props)||void 0===n?void 0:n.onClose)&&t.props.onClose())},t.handleBackdropClick=function(e){var n;e.currentTarget===e.target&&((null===(n=t.props)||void 0===n?void 0:n.onClose)&&t.props.onClose())},t}return Object(o.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){return Object(i.createPortal)(Object(r.jsx)("div",{className:l.a.Modal__backdrop,onClick:this.handleBackdropClick,children:Object(r.jsx)("div",{className:l.a.Modal__content,children:this.props.children})}),j)}}]),n}(u.Component)},96:function(t,e,n){}},[[120,6,7]]]);
//# sourceMappingURL=main.8762f39b.chunk.js.map